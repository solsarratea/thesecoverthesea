{"version":3,"sources":["../public/images sync nonrecursive //.(png|jpg)$","../public/images/Memb-I-00131_0001.jpg","../public/images/Memb-I-00131_0002.jpg","../public/images/Memb-I-00131_0003.jpg","../public/images/Memb-I-00131_0004.jpg","../public/images/Memb-I-00131_0005.jpg","../public/images/Memb-I-00131_0006.jpg","../public/images/Memb-I-00131_0007.jpg","../public/images/Memb-I-00131_0008.jpg","../public/images/Memb-I-00131_0009.jpg","../public/images/Memb-I-00131_0010.jpg","../public/images/Memb-I-00131_0011.jpg","../public/images/Memb-I-00131_0012.jpg","../public/images/Memb-I-00131_0013.jpg","../public/images/Memb-I-00131_0014.jpg","../public/images/Memb-I-00131_0015.jpg","../public/images/Memb-I-00131_0016.jpg","../public/images/Memb-I-00131_0017.jpg","../public/images/Memb-I-00131_0018.jpg","../public/images/Memb-I-00131_0019.jpg","../public/images/Memb-I-00131_0020.jpg","../public/images/Memb-I-00131_0021.jpg","../public/images/Memb-I-00131_0022.jpg","../public/images/Memb-I-00131_0023.jpg","../public/images/Memb-I-00131_0025.jpg","../public/images/Memb-I-00131_0026.jpg","../public/images/Memb-I-00131_0027.jpg","../public/images/Memb-I-00131_0028.jpg","../public/images/Memb-I-00131_0029.jpg","../public/images/Memb-I-00131_0030.jpg","../public/images/Memb-I-00131_0031.jpg","../public/images/Memb-I-00131_0032.jpg","../public/images/Memb-I-00131_0033.jpg","../public/images/Memb-I-00131_0034.jpg","../public/images/Memb-I-00131_0035.jpg","../public/images/Memb-I-00131_0036.jpg","../public/images/Memb-I-00131_0037.jpg","../public/images/Memb-I-00131_0038.jpg","../public/images/Memb-I-00131_0039.jpg","../public/images/Memb-I-00131_0040.jpg","../public/images/Memb-I-00131_0041.jpg","../public/images/Memb-I-00131_0042.jpg","../public/images/Memb-I-00131_0043.jpg","../public/images/Memb-I-00131_0044.jpg","../public/images/Memb-I-00131_0045.jpg","../public/images/Memb-I-00131_0046.jpg","../public/images/Memb-I-00131_0047.jpg","components/Slider.tsx","hooks/useSourceManager.tsx","hooks/useMaskManager.tsx","hooks/useLayersManager.tsx","components/Controls.tsx","components/Carousel.tsx","components/maskMaterial.tsx","components/Mask.tsx","components/layerMaterial.tsx","components/Layers.tsx","components/Information.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["map","./Memb-I-00131_0001.jpg","./Memb-I-00131_0002.jpg","./Memb-I-00131_0003.jpg","./Memb-I-00131_0004.jpg","./Memb-I-00131_0005.jpg","./Memb-I-00131_0006.jpg","./Memb-I-00131_0007.jpg","./Memb-I-00131_0008.jpg","./Memb-I-00131_0009.jpg","./Memb-I-00131_0010.jpg","./Memb-I-00131_0011.jpg","./Memb-I-00131_0012.jpg","./Memb-I-00131_0013.jpg","./Memb-I-00131_0014.jpg","./Memb-I-00131_0015.jpg","./Memb-I-00131_0016.jpg","./Memb-I-00131_0017.jpg","./Memb-I-00131_0018.jpg","./Memb-I-00131_0019.jpg","./Memb-I-00131_0020.jpg","./Memb-I-00131_0021.jpg","./Memb-I-00131_0022.jpg","./Memb-I-00131_0023.jpg","./Memb-I-00131_0025.jpg","./Memb-I-00131_0026.jpg","./Memb-I-00131_0027.jpg","./Memb-I-00131_0028.jpg","./Memb-I-00131_0029.jpg","./Memb-I-00131_0030.jpg","./Memb-I-00131_0031.jpg","./Memb-I-00131_0032.jpg","./Memb-I-00131_0033.jpg","./Memb-I-00131_0034.jpg","./Memb-I-00131_0035.jpg","./Memb-I-00131_0036.jpg","./Memb-I-00131_0037.jpg","./Memb-I-00131_0038.jpg","./Memb-I-00131_0039.jpg","./Memb-I-00131_0040.jpg","./Memb-I-00131_0041.jpg","./Memb-I-00131_0042.jpg","./Memb-I-00131_0043.jpg","./Memb-I-00131_0044.jpg","./Memb-I-00131_0045.jpg","./Memb-I-00131_0046.jpg","./Memb-I-00131_0047.jpg","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","p","Slider","props","ref","useRef","value","callback","useEffect","slider","current","onChange","evt","customEvent","Math","round","detail","addEventListener","removeEventListener","react_default","a","createElement","useSourceManager","create","set","selected","path","idx","loaded","setLoaded","state","objectSpread","setSelectedPath","useMaskManager","shaderInfo","color","r","g","b","deltaColor","deltaSmooth","setColor","newcolor","setDeltaColor","dc","setDeltaSmooth","ds","useLayersManager","light","resetCam","takeScreenshot","downloadJSON","layers","nextId","selectedId","show","orbitControls","setId","addLayer","newLayer","rest","objectWithoutProperties","push","colorIn","colorOut","pivotControls","removeLayer","index","findIndex","object","splice","setNewColor","setPivotControls","currentValue","setMix","mix","setBoolean","key","defineProperty","allPivotControls","val","Controls","size","_useState","useState","_useState2","slicedToArray","turnOn","_useState3","welcome","instructions","editMask","editLayer","data","_useState4","mode","setMode","toggleMode","newVal","selectRef","select","selectEl","optionToSelect","Array","from","options","find","item","outerText","Number","currentElement","returnValue","assign","style","bottom","top","left","width","height","className","onClick","document","querySelector","setProperty","Fragment","href","src","index_module","components_Slider","concat","name","o","Carousel","paths","onLoaded","onSelected","setIdx","length","react_three_fiber_esm","camera","position","Vector3","aspect","Html","scale","transform","occlude","position-y","i","display","OrbitControls","enableRotate","customMaterial","texture","uniforms","uColor","THREE","uSource","uDc","uDs","vertexShader","fragmentShader","ShaderMask","useTexture","attach","args","source","naturalWidth","naturalHeight","side","needsUpdate","allSources","require","replace","Mask","padding","react","uColorOut","uMix","Layer","web_pivotControls","visible","rotation","anchor","depthTest","fixed","lineWidth","transparent","downloadURI","uri","element","getElementById","link","download","body","appendChild","click","DownloadAsJSON","scene","useThree","layersData","layer","mesh","getObjectByName","lightMode","encodeURIComponent","JSON","stringify","TakeScreenshot","_useThree2","gl","render","domElement","toDataURL","ResetCamera","Layers","shadows","raycaster","params","Line","threshold","preserveDrawingBuffer","makeDefault","Information","onHover","section","v","elements","getElementsByClassName","forEach","blockSize1","blockSize2","overflowY","autoPlay","controls","App","window","innerWidth","setWidth","innerHeight","setHeight","didLoad","resize","components_Information","reportWebVitals","onPerfEntry","Function","then","bind","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","StrictMode","src_App"],"mappings":"0OAAA,IAAAA,EAAA,CACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,GACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,IACAC,0BAAA,KAIA,SAAAC,EAAAC,GACA,IAAAC,EAAAC,EAAAF,GACA,OAAAG,EAAAF,GAEA,SAAAC,EAAAF,GACA,IAAAC,EAAAjD,EAAAgD,GACA,KAAAC,EAAA,IACA,IAAAG,EAAA,IAAAC,MAAA,uBAAAL,EAAA,KAEA,MADAI,EAAAE,KAAA,mBACAF,EAEA,OAAAH,EAEAF,EAAAQ,KAAA,WACA,OAAAC,OAAAD,KAAAvD,IAEA+C,EAAAU,QAAAP,EACAQ,EAAAC,QAAAZ,EACAA,EAAAE,GAAA,oBCpEAS,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,+DCAxCF,EAAAC,QAAiBR,EAAAS,EAAuB,sMCkCzBC,SA1BA,SAACC,GAC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","file":"static/js/main.fb6a3648.chunk.js","sourcesContent":["var map = {\n\t\"./Memb-I-00131_0001.jpg\": 86,\n\t\"./Memb-I-00131_0002.jpg\": 87,\n\t\"./Memb-I-00131_0003.jpg\": 88,\n\t\"./Memb-I-00131_0004.jpg\": 89,\n\t\"./Memb-I-00131_0005.jpg\": 90,\n\t\"./Memb-I-00131_0006.jpg\": 91,\n\t\"./Memb-I-00131_0007.jpg\": 92,\n\t\"./Memb-I-00131_0008.jpg\": 93,\n\t\"./Memb-I-00131_0009.jpg\": 94,\n\t\"./Memb-I-00131_0010.jpg\": 95,\n\t\"./Memb-I-00131_0011.jpg\": 96,\n\t\"./Memb-I-00131_0012.jpg\": 97,\n\t\"./Memb-I-00131_0013.jpg\": 98,\n\t\"./Memb-I-00131_0014.jpg\": 99,\n\t\"./Memb-I-00131_0015.jpg\": 100,\n\t\"./Memb-I-00131_0016.jpg\": 101,\n\t\"./Memb-I-00131_0017.jpg\": 102,\n\t\"./Memb-I-00131_0018.jpg\": 103,\n\t\"./Memb-I-00131_0019.jpg\": 104,\n\t\"./Memb-I-00131_0020.jpg\": 105,\n\t\"./Memb-I-00131_0021.jpg\": 106,\n\t\"./Memb-I-00131_0022.jpg\": 107,\n\t\"./Memb-I-00131_0023.jpg\": 108,\n\t\"./Memb-I-00131_0025.jpg\": 109,\n\t\"./Memb-I-00131_0026.jpg\": 110,\n\t\"./Memb-I-00131_0027.jpg\": 111,\n\t\"./Memb-I-00131_0028.jpg\": 112,\n\t\"./Memb-I-00131_0029.jpg\": 113,\n\t\"./Memb-I-00131_0030.jpg\": 114,\n\t\"./Memb-I-00131_0031.jpg\": 115,\n\t\"./Memb-I-00131_0032.jpg\": 116,\n\t\"./Memb-I-00131_0033.jpg\": 117,\n\t\"./Memb-I-00131_0034.jpg\": 118,\n\t\"./Memb-I-00131_0035.jpg\": 119,\n\t\"./Memb-I-00131_0036.jpg\": 120,\n\t\"./Memb-I-00131_0037.jpg\": 121,\n\t\"./Memb-I-00131_0038.jpg\": 122,\n\t\"./Memb-I-00131_0039.jpg\": 123,\n\t\"./Memb-I-00131_0040.jpg\": 124,\n\t\"./Memb-I-00131_0041.jpg\": 125,\n\t\"./Memb-I-00131_0042.jpg\": 126,\n\t\"./Memb-I-00131_0043.jpg\": 127,\n\t\"./Memb-I-00131_0044.jpg\": 128,\n\t\"./Memb-I-00131_0045.jpg\": 129,\n\t\"./Memb-I-00131_0046.jpg\": 130,\n\t\"./Memb-I-00131_0047.jpg\": 131\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 85;","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0001.e0d25939.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0002.7f42112d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0003.dc64281a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0004.a05c9dfe.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0005.3af91827.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0006.0f7e1547.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0007.c0b045b2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0008.5c233569.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0009.3f4bda50.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0010.c47e0c49.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0011.670f7378.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0012.5d0e1907.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0013.bfd194e1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0014.ca7c6714.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0015.6410960c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0016.ce481f4f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0017.f3205de4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0018.b8a9e50a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0019.22f8fc04.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0020.029ad2b3.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0021.a457e1d1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0022.33abd95a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0023.963cb641.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0025.51918eb0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0026.dd1cba02.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0027.1bed5834.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0028.ec970aec.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0029.a8cfd5ea.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0030.5f8d21a5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0031.340484fb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0032.0228c6c8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0033.557d4e8a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0034.4f6875ec.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0035.ca7dd7a8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0036.ea9ccb0e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0037.86e0be5a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0038.83da0cf8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0039.088099d5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0040.8d7972b1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0041.61f6750c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0042.9662633b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0043.48462ae2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0044.285fe389.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0045.a84bcc76.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0046.b6b4307b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Memb-I-00131_0047.672cbc73.jpg\";","import 'toolcool-range-slider';\nimport React,{ useRef, useEffect } from 'react';\n\ntype SliderProps = {\n    value: string,\n    callback: Function\n}\n\nconst Slider = (props: SliderProps) => {\n  const ref = useRef<HTMLElement | null >(null);\n  const { value, callback } = props;\n  useEffect(() => {\n      const slider = ref.current;\n    if (slider) {\n      \n        const onChange = (evt: Event) => {\n          const customEvent = evt as CustomEvent;\n          const value = Math.round(customEvent.detail.value);\n          callback(value / 100);\n        };\n\n        slider.addEventListener('change', onChange);\n\n        return () => {\n          slider.removeEventListener('change', onChange);\n        };\n      } \n  }, [ref]);\n  \n  return (\n    <toolcool-range-slider value={value} ref={ref} />\n  )\n};\n\nexport default Slider","import create from 'zustand';\n\n export type MediaState = { \n    loaded: boolean,\n    selected: {\n        path: string,\n        idx: number,\n    },\n    setLoaded: Function,\n    setSelectedPath: Function\n }\n\nconst useSourceManager = create((set) => ({\n    selected: {\n        path: \"\",\n        idx: 1,\n    },\n    loaded: false,\n    setLoaded: () =>\n        set((state: MediaState) => {\n            if (state.loaded) {\n              //  console.log(state);\n                return state\n            } else {\n    \n                return {...state,\n                    loaded: true,\n                }\n            };\n        }),\n    setSelectedPath: (path: string, idx: number) =>\n        set((state: MediaState) => {\n           // console.log(state);\n            return {\n                selected: { path: path, idx: idx}\n            };\n        })\n}));\n\nexport default  useSourceManager;\n","import create from 'zustand';\nimport { RGBAColor } from '../types/common';\n\n export type MaskState = { \n     shaderInfo: {\n         color: RGBAColor,\n         deltaColor: number,\n         deltaSmooth: number\n     },\n     setColor: Function,\n     setDeltaColor: Function,\n     setDeltaSmooth: Function\n\n }\n\nconst useMaskManager = create((set) => ({\n    shaderInfo: {\n        color: {\"r\":154,\"g\":221,\"b\":120,\"a\":0.5},\n        deltaColor: 0.3,\n        deltaSmooth: 0.2\n    },\n    setColor: (newcolor: RGBAColor) =>\n        set((state: MaskState) => {\n            return {\n                ...state,\n                shaderInfo: {\n                    ...state.shaderInfo,\n                    color: newcolor,\n                }\n            };\n        }),\n    setDeltaColor: (dc: number) =>\n        set((state: MaskState) => {\n            return {\n                ...state,\n                shaderInfo: {\n                    ...state.shaderInfo,\n                    deltaColor: dc,\n                }\n            };\n        }),\n    setDeltaSmooth: (ds: number) =>\n        set((state: MaskState) => {\n            return {\n                ...state,\n                shaderInfo: {\n                    ...state.shaderInfo,\n                    deltaSmooth: ds,\n                }\n            };\n        }),\n   \n}));\n\nexport default  useMaskManager ;\n","import { on } from 'stream';\nimport create from 'zustand';\nimport { RGBAColor } from '../types/common';\n\nexport type Layer = {\n    colorIn: RGBAColor,\n    colorOut: RGBAColor,\n    deltaColor: number,\n    deltaSmooth: number,\n    id: number,\n    mix: number,\n    path: string,\n    pivotControls: boolean\n}\n \n export type LayersState = { \n    layers: Layer[],\n    nextId: number,\n    selectedId: number,\n    addLayer: Function,\n    removeLayer: Function,\n    setPivotControls: Function,\n    setColor: Function,\n    setMix: Function,\n    setBoolean: Function,\n    resetCam: boolean,\n    downloadJSON: boolean,\n    takeScreenshot: boolean,\n    light: boolean\n }\n\nconst useLayersManager = create((set) => ({\n    light: true,\n    resetCam: false,\n    takeScreenshot: false,\n    downloadJSON:false,\n    layers: [],\n    nextId: 0,\n    selectedId: null,\n    show: true,\n    orbitControls: false,\n    setId: (id: number) => \n        set((state: LayersState) => {\n            return {\n                ...state,\n                selectedId: id\n            }\n        }), \n    addLayer: (newLayer: any) =>\n        set((state: LayersState) => {\n            const { color, ...rest } = newLayer;\n            state.layers.push({\n                ...rest,\n                colorIn: color,\n                colorOut: color,\n                id: state.nextId,\n                pivotControls: true\n            });\n\n            return {...state,\n                nextId: state.nextId + 1,\n                selectedId: state.nextId\n            }\n        }),\n    removeLayer: (id: number) =>\n        set((state: LayersState) => {\n            var index = state.layers.findIndex(object => {\n                return object.id === id;\n            });\n            state.layers.splice(index,1);\n            return {\n                ...state,\n                selectedId: null\n            };\n        }),\n    setNewColor: (id: number, newcolor: RGBAColor) =>\n        set((state: LayersState) => {\n            var index = state.layers.findIndex(object => {\n                return object.id === id;\n            });\n            state.layers[index].colorOut = newcolor;\n            return {\n                ...state\n            };\n        }),\n    setPivotControls: (id: number) =>\n        set((state: LayersState) => {\n            var index = state.layers.findIndex(object => {\n                return object.id === id;\n            });\n            var currentValue = state.layers[index].pivotControls;\n            state.layers[index].pivotControls = !currentValue;\n            return {\n                ...state\n            };\n        }),\n    setMix: ( value: number) =>\n        set((state: LayersState) => {\n            var id = state.selectedId;\n            if (id === null) return state;\n            var index = state.layers.findIndex(object => {\n                return object.id === id;\n            });\n            state.layers[index].mix = value;\n            return {\n                ...state\n            };\n        }),\n    setBoolean: (key: string, value: boolean) => \n\n        set((state: LayersState) => {\n            return {\n                ...state,\n                [key]: value\n            }\n        }), \n        allPivotControls: (val: boolean) =>\n        set((state: LayersState) => {\n             const layers= state.layers.map(object => {\n                 return {\n                    ...object,\n                    pivotControls: val,\n                 }\n             });\n            return {\n                ...state,\n                layers: layers\n            };\n        }),\n    \n}));\n\nexport default  useLayersManager ;\n","import React, { useState, useEffect,useRef } from 'react';\n\nimport { RgbaColorPicker } from \"react-colorful\";\nimport Slider from './Slider';\n\nimport useSourceManager from '../hooks/useSourceManager';\nimport useMaskManager from '../hooks/useMaskManager';\nimport useLayersManager, { Layer } from '../hooks/useLayersManager';\n\nimport { RGBAColor } from '../types/common';\n\nimport '../styles/controls.css';\n\n\nexport type ControlsProps = {\n  size: {\n    left: number,\n    top: number,\n    width: number,\n    height: number\n    },\n    className: string\n}\n\nexport function Controls(props: ControlsProps) {\n    const { size } = props;\n    const [light, turnOn] = useState(true);\n\n    const [mode, setMode] = useState({\n        welcome: true,\n        instructions: false,\n        editMask: false,\n        editLayer: false,\n        data: false\n    })\n   \n    \n\n    const toggleMode = (selected: string, newVal: boolean) => {\n        setMode({ \n            welcome: false,\n            instructions: false,\n            editMask: false,\n            editLayer: false,\n            data: false,\n            [selected]: newVal\n        });\n\n    };\n    const { editMask, editLayer, instructions, welcome, data } = mode;\n\n    \n    const shaderInfo = useMaskManager((state: any) => state.shaderInfo);\n    const setColor = useMaskManager((state: any) => state.setColor);\n    const setDeltaColor = useMaskManager((state: any) => state.setDeltaColor);\n    const setDeltaSmooth = useMaskManager((state: any) => state.setDeltaSmooth);\n\n    const addLayer = useLayersManager((state: any) => state.addLayer);\n    const removeLayer = useLayersManager((state: any) => state.removeLayer);\n\n    const id = useLayersManager((state: any) => state.selectedId);\n    const setNewColor = useLayersManager((state: any) => state.setNewColor);\n    const setPivotControls = useLayersManager((state: any) => state.setPivotControls);\n    const setMix = useLayersManager((state: any) => state.setMix);\n    const state = useLayersManager((state: any) => state);\n    const selectRef = useRef()  as React.MutableRefObject<HTMLSelectElement>;\n\n    useEffect(() => {\n        const select = selectRef.current;\n        if (select) {\n            const selectEl = select as HTMLSelectElement;\n\n            const options = Array.from(selectEl.options);\n            const optionToSelect = options.find(item => item.outerText == id);\n            if (optionToSelect) {\n                optionToSelect.selected = true;\n                }\n            }\n        }\n        ,[selectRef, id])\n    \n    useEffect(() => {\n        const select = selectRef.current;\n       \n        if (select) {\n            const selectEl = select as HTMLSelectElement;\n            selectEl.addEventListener(\"change\", () => {\n                state.setId(Number(selectEl.value))\n            });\n        }\n    },[selectRef.current])\n\n    const currentElement = useLayersManager((state: any) => {\n        var returnValue = null;\n        if (id !== null) {\n            var index = state.layers.findIndex((object: Layer) => {\n                return object.id === id;\n            });\n            if (index !== -1) {\n                returnValue = state.layers[index];\n            }\n        }\n       \n        return returnValue;\n        \n    });\n    const path = useSourceManager((state: any) => state.selected.path);\n    \n\n\n    return (<div {...props} id=\"controls\"\n            style={{\n            bottom: size.top,\n            left: size.left,\n            width: size.width,\n            height: size.height,\n            }}>\n        <section className=\"header\" >\n                <h2>âˆ©ï½€-Â´)âŠƒâ”â˜†ï¾Ÿ.*ï½¥ï½¡ï¾Ÿ</h2>\n                <button className=\"emoji\" onClick={() => {\n                    var r = document.querySelector<HTMLElement>(':root');\n                    var newVal = !light;\n                    state.setBoolean('light', newVal);\n                    if (r) {\n                        if (newVal) {\n                            r.style.setProperty('--background', '#f8f8f1');\n                            r.style.setProperty('--font-color', 'black');\n                        } else {\n                            r.style.setProperty('--background', 'black');\n                            r.style.setProperty('--font-color', '#f8f8f1');\n                        }\n                    }\n                    turnOn(newVal)\n\n                }}>ğŸ’¡</button>\n        </section>\n        <hr />\n       \n            <section className=\"selector\">\n                <button className={!welcome ? \"\" : \"selected\"} onClick={() => {\n                    const val = !welcome;\n                    toggleMode(\"welcome\", val);\n                    state.setBoolean('show', true);\n                }}>welcome</button>\n                <hr />\n                <button className={!instructions ? \"\" : \"selected\"} onClick={() => {\n                    const val = !instructions;\n                    toggleMode(\"instrusctions\", val);\n                 \n                    state.setBoolean('show', false);\n\n                }}>{`?`}</button>\n                <hr/>\n                <button className={!editMask ? \"\" : \"selected\"} onClick={() => {\n                    const val = !editMask;\n                    toggleMode(\"editMask\", val);\n                    state.setBoolean('show', true);\n                }}>mask</button>\n                <hr/>\n                <button className={!editLayer ? \"\" : \"selected\"} onClick={() => {\n                    const val = !editLayer;\n                    toggleMode(\"editLayer\", val);\n                    state.setBoolean('show', true);\n                }}>layer</button>\n                <hr/>\n                <button className={!data ? \"\" : \"selected\"} onClick={() => {\n                        const val = !data;\n                        toggleMode(\"data\", val);\n                        state.setBoolean('show', true);\n                    }}>data</button>\n                \n        </section>\n        <section className=\"body\" style={{ height: size.height*0.9}}>\n            {welcome ?\n                <>\n                <section className=\"text scroll\">\n                    <p>This is a 3D chromatic layer editor from the sketches of Georg Forsters.</p>\n\n                    <p>\n                        It is part of the project <a href=\"https://www.hackdash.org/projects/634ab7a16d202d739f69ce81\">THESECOVER THE SEA</a> developed during the hackathon <a href=\"https://creating-new-dimensions.org/\">Creating New Dimensions</a>\n                        </p>\n                    </section>\n                    <section className=\"text scroll\">\n            \n                    <p>\n                       Design a postcard from  the images of dataset <a href=\"https://creating-new-dimensions.org/Georg-Forsters-Entdeckung-der-Suedsee/\">Georg-Forsters-Entdeckung-der-Suedsee</a>, by composing chromatic layers.\n                    </p>\n                    <img src=\"./icono.png\"></img>\n                    <p>\n                        POST your postcard to  <a href=\"https://thesecoverthesea.solsarratea.world/\"> â†“  the sea</a>\n                    </p>\n                    <p className=\"wip\">\n                        AND print it !\n                    </p>\n                       \n    \n                </section></>: null}\n    \n            \n            {editMask ?\n                <section id=\"mask\" className=\"scroll\">\n                    <section className=\"rgb-layout\">\n                        <p>â†“ selection: </p>\n                        <RgbaColorPicker color={shaderInfo.color} onChange={(value: RGBAColor) => setColor(value)} />\n                    </section>\n                    <section className=\"slider\">\n                        <p>â†“ threshold: </p>\n                        <Slider value={`${shaderInfo.deltaColor * 100}`} callback={(value: number) => setDeltaColor(value)} />\n                    </section>\n                    <section className=\"slider\">\n                        <p>â†“ smootheness: </p>\n                        <Slider value={`${shaderInfo.deltaSmooth * 100}`} callback={(value: number) => setDeltaSmooth(value)} />\n                    </section>\n                   \n                </section> : null}\n    \n            {editLayer ?\n                \n                <section id=\"layerc\" className=\"scroll\">\n                    <section className=\"current\" >\n                        <p>{`selected layer: ${id}`}</p>\n                        <select ref={selectRef} name=\"layer-id\" id=\"select-layer-id\">\n                            {state.layers.map((o: {id:number}) => \n                                (<option key={`${o.id}-option` }  value={`${o.id}`}>{`${o.id}`}</option>)\n                            )}\n\n                        </select>\n                    </section>\n            \n                        <hr/>\n                    <section className=\"rgb-layout\">\n                        <p>â†“ color for output </p>\n                        <RgbaColorPicker color={shaderInfo.color} onChange={(value: RGBAColor) => { if (id !== null) { setNewColor(id, value) } }} />\n                    </section>\n                    <section className=\"slider\">\n                            <p>â†“ mix color with original source: </p>\n                        <Slider value={currentElement ? `${currentElement.mix * 100}` : '80'} callback={(value: number) => setMix(value)} />\n                    </section>\n                    <hr/>\n                    <section className=\"generator\">\n                        <p>â†“ layer from mask </p>\n                        <button className=\"button\" onClick={() => {\n                            addLayer({ ...shaderInfo, path });\n                        }\n                        }>+</button>\n                        <button className={`button ${currentElement!== null && currentElement.pivotControls ? \"selected\" : \"\"}`} onClick={() => { if (id !== null) { setPivotControls(id) } }}>\n                            <img className={`icon ${light ? \"\" : \"inverted\"}`}  src=\"icons/axis.jpeg\"/>\n                        </button>\n                        <button className=\"button\" onClick={() => { if (id !== null) { removeLayer(id) } }}>-</button>\n                    </section>\n                    <hr/>\n                    <section className=\"world-view\">\n                        <p>â†“ world view camera</p>\n\n                        <button className={`button ${state.orbitControls ? \"\" : \"selected\"}`} onClick={() => state.setBoolean('orbitControls', !state.orbitControls )}>2D</button>\n                        <button className={`button ${!state.orbitControls ? \"\" : \"selected\"}`} onClick={() => state.setBoolean('orbitControls', !state.orbitControls )}>3D</button>\n                        <button className=\"button\" onClick={()=> state.setBoolean('resetCam', true)}>R</button>\n                    \n                    </section>\n                    <hr/>\n                    <section >\n                        <p className=\"padding-left\">â†“ <b>show</b> | <b>hide</b> all controls on layers</p>\n                        <button className=\"button ascii\"  onClick={() => state.allPivotControls(true)}>{\"(ï½¥Ï‰ï½¥)\"}</button>\n                        <button className=\"button ascii\" onClick={() => state.allPivotControls(false)}>{\"â”´â”¤Ï‰ï½¥)\"}</button>\n                    </section> \n                \n                </section> : null}\n            {data ?\n                <>\n                    <div>\n                        <p className=\"padding-left\"> â†“ download & post it </p>\n                    </div>\n                    <hr />\n                   \n                    <div className=\"selector\">\n                        <button className=\"\" onClick={() => state.setBoolean(\"downloadJSON\", true)}>json</button>\n                        <hr/>\n                        <button className=\"\" onClick={()=> state.setBoolean(\"takeScreenshot\", true)}>image</button>\n                        <hr />\n                        <button className=\"\">all</button>\n                        <hr />\n                        <button  className=\"\">ãƒ„</button>\n                    </div>\n                     \n                </>\n            :null}\n            \n        </section>\n       \n    </div>\n    )\n}\n\n","import React, { useEffect, useRef, useState } from 'react';\nimport '../styles/carousel.css';\nimport { Vector3 } from 'three';\nimport { Html, OrbitControls } from '@react-three/drei';\nimport {Canvas} from '@react-three/fiber'\ntype Props = {\n    paths: string[],\n    height: number,\n    onLoaded: Function,\n    onSelected: Function,\n    width: number\n}\n\nexport default function Carousel(props: Props) {\n    const { paths, height, onLoaded, onSelected, width } = props;\n    const ref = useRef<HTMLDivElement | null>(null);\n    const [idx, setIdx] = useState(3);\n    const [length,] = useState(paths.length);\n \n    useEffect(() => {\n        if (ref.current) {\n            onLoaded();\n        }\n    }, [ref])\n    \n    useEffect(() => {\n        var s = onSelected(paths[idx], idx); \n    }, [idx])\n\n    return (\n        <Canvas camera={{position: new Vector3(0, 0,8), aspect: width/height }}>\n             <Html scale={2} transform occlude position-y={-.5}>\n            <div ref={ref} id=\"container\">\n                <button className=\"button\" onClick={() => {\n                    const prev = (idx === 0) ? length - 1 : idx - 1;\n                    setIdx(prev)\n                }}>{\"<\"}</button>\n                    {paths.map((path: string, i: number) => {\n                \n                        return (<img key={`${i}-img`} height={height * 0.9} width={height*0.9} style={(i === idx ? {} : { display: \"none\" })} \n                            src = { path } \n                            id = {`${i}`}/>)\n                    })}\n                <button className=\"button\" onClick={() => setIdx((idx + 1)%length)}>{\">\"}</button>\n                </div>\n            </Html>\n            <OrbitControls enableRotate={false} />\n        </Canvas>\n       \n        \n    )\n}\n","import * as THREE from 'three';\nimport { RGBAColor } from '../types/common';\n\nconst rgbtohsl = `\nvec3 hsl2rgb( in vec3 c )\n{\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\n    return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));\n}\n\n\nvec3 rgb2hsl( in vec3 c ){\n  float h = 0.0;\n\tfloat s = 0.0;\n\tfloat l = 0.0;\n\tfloat r = c.r;\n\tfloat g = c.g;\n\tfloat b = c.b;\n\tfloat cMin = min( r, min( g, b ) );\n\tfloat cMax = max( r, max( g, b ) );\n\n\tl = ( cMax + cMin ) / 2.0;\n\tif ( cMax > cMin ) {\n\t\tfloat cDelta = cMax - cMin;\n        \n        //s = l < .05 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) ); Original\n\t\ts = l < .0 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) );\n        \n\t\tif ( r == cMax ) {\n\t\t\th = ( g - b ) / cDelta;\n\t\t} else if ( g == cMax ) {\n\t\t\th = 2.0 + ( b - r ) / cDelta;\n\t\t} else {\n\t\t\th = 4.0 + ( r - g ) / cDelta;\n\t\t}\n\n\t\tif ( h < 0.0) {\n\t\t\th += 6.0;\n\t\t}\n\t\th = h / 6.0;\n\t}\n\treturn vec3( h, s, l );\n}\n`\n\nconst customMaterial = ( texture: any,\n    color: RGBAColor,\n    deltaColor: number,\n    deltaSmooth: number) => ({\n  uniforms: {\n    uColor: { value: new THREE.Vector4(color.r / 255, color.g / 255, color.b / 255, color.a / 255.) },\n    uSource: { value: texture },\n    uDc: { value: deltaColor },\n    uDs: { value: deltaSmooth }\n        \n  },\n  vertexShader: `\n    precision mediump float;\n    varying vec2 vUv;\n\n    void main() {\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.);\n        gl_Position = projectionMatrix * mvPosition;\n        vUv = uv;\n    }\n  `,\n  fragmentShader: `\n    varying vec2 vUv;\n    uniform vec4 uColor;\n    uniform sampler2D uSource;\n    uniform float uDc;\n    uniform float uDs;\n    ${ rgbtohsl }\n    void main() {\n      vec2 uv = vUv; vec3 color;\n      vec3 tex = texture2D(uSource, vUv).rgb;\n\n      //Make colors more vivid\n      tex.rgb = rgb2hsl(tex.rgb);\n      tex.b = pow( tex.b,.6);\n      tex.g = pow( tex.g,.6);\n      tex.rgb = hsl2rgb(tex.rgb);\n\n      float dc = uDc;\n      float mask = smoothstep(dc, dc+uDs*0.5,length(tex.rgb-uColor.rgb));\n      color.rgb = mix(vec3(1.,0.,0.),tex.rgb, mask);\n\n      gl_FragColor = vec4(color, 1.);\n    }\n  `\n});\n\nexport default  customMaterial;","import React, { Suspense, useState, } from 'react';\nimport { useRef, useEffect } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport {OrbitControls,useTexture } from '@react-three/drei'\nimport Carousel from './Carousel';\nimport { RGBAColor } from '../types/common';\nimport  customMaterial from './maskMaterial'\nimport * as THREE from 'three';\nimport useSourceManager from '../hooks/useSourceManager';\nimport useMaskManager from '../hooks/useMaskManager';\nimport '../styles/mask.css';\n\nexport type shaderMaterialProps = {\n  path: string,\n  color: RGBAColor,\n  deltaColor: number,\n  deltaSmooth: number\n};\nfunction ShaderMask(props: shaderMaterialProps ) {\n  const { path, color, deltaColor, deltaSmooth } = props;\n  \n  var texture = useTexture(path);\n\n  return (\n    <mesh>\n      <planeGeometry  attach=\"geometry\" args={[5*texture.source.data.naturalWidth/texture.source.data.naturalHeight,5]} />\n      <shaderMaterial\n        attach=\"material\"\n        args={[customMaterial(texture,color, deltaColor, deltaSmooth)]}\n        side={THREE.DoubleSide}\n        needsUpdate={true}\n      />\n    </mesh>\n  )\n}\n\nexport type MaskProps = {\n  size: {\n    left: number,\n    top: number,\n    width: number,\n    height: number\n  },\n  className: string\n}\n\nconst allSources = require.context('../../public/images', false, /\\.(png|jpg)$/).keys().map(\n  (item: string) => (item.replace('./', 'images/'))\n);\n\n\nexport function Mask(props: MaskProps) {\n  const { size } = props;\n\n  const path = useSourceManager((state: any) => state.selected.path);\n  const shaderInfo = useMaskManager((state: any) => state.shaderInfo);\n  const onLoaded = useSourceManager((state: any) => state.setLoaded);\n  const onSelected = useSourceManager((state: any) => state.setSelectedPath);\n\n    return (<div {...props}\n      style={{\n        bottom: size.top,\n        left: size.left,\n        width: size.width,\n        height: size.height,\n        padding: \"0 0em\"\n      }}>\n      <div id=\"mask-layout\" >\n        <section id=\"gallery\">\n          <Carousel \n            height={size.height * 0.25}\n            width={size.width}\n            paths={allSources}\n            onLoaded={onLoaded}\n            onSelected={onSelected}\n          />\n        </section>\n\n        <section id=\"three-canvas\">\n          <Canvas camera={{aspect: size.width/size.height}}>\n              <Suspense>\n              {path ? <ShaderMask {...shaderInfo} path={path} /> : null}\n              </Suspense>\n              <OrbitControls  />\n          </Canvas>\n        </section>\n        </div>\n      </div>\n      \n      )\n}\n\n","import * as THREE from 'three';\nimport { RGBAColor } from '../types/common';\n\nconst rgbtohsl = `\nfloat luma(vec3 color) { return dot(color, vec3(0.299, 0.587, 0.114)); }\n\nvec3 hsl2rgb( in vec3 c )\n{\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\n    return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));\n}\n\n\nvec3 rgb2hsl( in vec3 c ){\n  float h = 0.0;\n\tfloat s = 0.0;\n\tfloat l = 0.0;\n\tfloat r = c.r;\n\tfloat g = c.g;\n\tfloat b = c.b;\n\tfloat cMin = min( r, min( g, b ) );\n\tfloat cMax = max( r, max( g, b ) );\n\n\tl = ( cMax + cMin ) / 2.0;\n\tif ( cMax > cMin ) {\n\t\tfloat cDelta = cMax - cMin;\n        \n        //s = l < .05 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) ); Original\n\t\ts = l < .0 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) );\n        \n\t\tif ( r == cMax ) {\n\t\t\th = ( g - b ) / cDelta;\n\t\t} else if ( g == cMax ) {\n\t\t\th = 2.0 + ( b - r ) / cDelta;\n\t\t} else {\n\t\t\th = 4.0 + ( r - g ) / cDelta;\n\t\t}\n\n\t\tif ( h < 0.0) {\n\t\t\th += 6.0;\n\t\t}\n\t\th = h / 6.0;\n\t}\n\treturn vec3( h, s, l );\n}\n`\nexport type LayerUniforms = {\n  texture: THREE.Texture,\n  colorIn: RGBAColor,\n  colorOut: RGBAColor,\n  deltaColor: number,\n  deltaSmooth: number,\n  mix: number\n}\nconst customMaterial = (uniforms: LayerUniforms) => {\n  const { texture, colorIn, colorOut, deltaColor, deltaSmooth, mix } = uniforms;\n  return {\n    uniforms: {\n      uColor: { value: new THREE.Vector4(colorIn.r / 255, colorIn.g / 255, colorIn.b / 255, colorIn.a / 255.) },\n      uColorOut: { value: new THREE.Vector4(colorOut.r / 255, colorOut.g / 255, colorOut.b / 255, colorOut.a / 255.) },\n      uSource: { value: texture },\n      uDc: { value: deltaColor },\n      uDs: { value: deltaSmooth },\n      uMix: {value: mix }\n        \n    },\n    vertexShader: `\n    precision mediump float;\n    varying vec2 vUv;\n\n    void main() {\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.);\n        gl_Position = projectionMatrix * mvPosition;\n        vUv = uv;\n    }\n  `,\n    fragmentShader: `\n    varying vec2 vUv;\n    uniform vec4 uColor;\n    uniform vec4 uColorOut;\n    uniform sampler2D uSource;\n    uniform float uDc;\n    uniform float uDs;\n    uniform float uMix;\n\n    ${rgbtohsl}\n    void main() {\n      vec2 uv = vUv; vec3 color;\n      vec3 tex = texture2D(uSource, vUv).rgb;\n\n      //Make colors more vivid\n      tex.rgb = rgb2hsl(tex.rgb);\n      tex.b = pow( tex.b,.6);\n      tex.g = pow( tex.g,.6);\n      tex.rgb = hsl2rgb(tex.rgb);\n\n      float dc = uDc;\n      float mask = smoothstep(dc, dc+uDs*0.5,length(tex.rgb-uColor.rgb));\n      color.rgb = mix(mix(uColorOut.rgb,tex.rgb, uMix), vec3(0.), mask);\n\n      gl_FragColor = vec4(color, 1.-mask);\n    }\n  `\n  }\n};\n\nexport default  customMaterial;","import React, { Suspense, useEffect } from 'react';\nimport customMaterial,{ LayerUniforms }  from './layerMaterial';\nimport useLayersManager from '../hooks/useLayersManager';\nimport * as THREE from 'three';\nimport { Canvas } from '@react-three/fiber';\nimport { useThree } from '@react-three/fiber';\nimport { OrbitControls, useTexture, PivotControls } from '@react-three/drei'\nimport '../styles/layers.css';\nimport { RGBAColor } from '../types/common';\nimport { Mesh, StaticReadUsage } from 'three';\n\nexport type LayersProps = {\n    size: {\n      left: number,\n      top: number,\n      width: number,\n      height: number,\n    },\n  className: string\n}\n  \nexport type LayerProps = {\n  colorIn: RGBAColor,\n  colorOut: RGBAColor,\n  deltaColor: number,\n  deltaSmooth: number,\n  id: number,\n  mix: number,\n  path: string,\n  pivotControls: boolean\n\n};\n\nfunction Layer(props: LayerProps) {\n\n  const {\n    colorIn,\n    colorOut,\n    deltaColor,\n    deltaSmooth,\n    id,\n    mix,\n    path,\n    pivotControls\n    } = props;\n \n\n    var texture = useTexture(path);\n    const setId = useLayersManager((state: any) => state.setId);\n    const layers = useLayersManager((state: any) => state.layers);\n  return (\n        <Suspense>\n         <PivotControls visible={pivotControls} rotation={[0, 0., 0]} anchor={[0, 0, 0]} scale={75} depthTest={false} fixed lineWidth={2}>\n            <mesh name={`layer-${props.id}`} position={new THREE.Vector3(0., 0., -id * .2)} onClick={() => {\n              setId(id)\n            }\n            }>\n                  <planeGeometry  attach=\"geometry\" args={[4*texture.source.data.naturalWidth/texture.source.data.naturalHeight,4]} />\n                  <shaderMaterial  transparent={true} \n                    attach=\"material\"\n                  args={[customMaterial({ texture, colorIn, colorOut, deltaColor, deltaSmooth, mix })]}\n                    side={THREE.DoubleSide}\n                />\n              </mesh>\n          </PivotControls>\n      </Suspense>\n      \n    \n    )\n}\n\nfunction downloadURI(uri:string, name:string, id: string) {\n  var element = document.getElementById(id);\n  if (element) {\n    const link = element as HTMLAnchorElement;\n    link.download = name;\n    link.href = uri;\n    document.body.appendChild(link);\n    link.click();\n  }\n}\n\nfunction DownloadAsJSON() {\n  const { scene } = useThree();\n  const downloadJSON = useLayersManager((state:any) =>state.downloadJSON)\n  const setBoolean = useLayersManager((state: any) => state.setBoolean);\n  const state = useLayersManager((state: any) => state);\n  \n  const exportScene = () => {\n\n      const layersData = state.layers.map((layer: LayerProps) => {\n      const { id } = layer;\n      const mesh = scene.getObjectByName(`layer-${id}`) as Mesh;\n      \n        \n      return {\n        ...layer,\n        position: mesh.position,\n        rotation: mesh.rotation\n      }\n      })\n    \n    return {\n      layersData,\n      lightMode: state.light\n    };\n  };\n  \n  useEffect(() => {\n    if (downloadJSON) {\n      const data = exportScene();\n      var dataStr = \"data:text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(data));\n      downloadURI(dataStr, \"postcard-data.json\",\"download-json\");\n       setBoolean(\"downloadJSON\", false);\n    }\n\n  }, [downloadJSON]);\n  return <></>;\n}\n  \n\nfunction TakeScreenshot() {\n  const { gl, scene, camera } = useThree()\n  const takeScreenshot = useLayersManager((state:any) =>state.takeScreenshot)\n  const setBoolean = useLayersManager((state: any) => state.setBoolean);\n  \n  useEffect(() => {\n    if (takeScreenshot) {\n      gl.render(scene, camera)\n      const screenshot = gl.domElement.toDataURL();\n      downloadURI(screenshot, \"postcard-view.png\",\"download-image\");\n      setBoolean(\"takeScreenshot\", false);\n    }\n\n  }, [takeScreenshot]);\n\n  return <></>;\n}\n\nfunction ResetCamera() {\n  const { camera } = useThree();\n  const resetCam = useLayersManager((state:any) =>state.resetCam)\n  const setBoolean = useLayersManager((state: any) => state.setBoolean);\n  \n  useEffect(() => {\n    camera.position.set( 0, 0, 4);\n    setBoolean(\"resetCam\", false); \n\n  }, [resetCam]);\n\n  return <></>;\n}\n\n\n\n\nexport function Layers(props: LayersProps) {\n  const { size } = props;\n  const state = useLayersManager((state: any) => state);\n\n    return (<div {...props}\n      style={{\n        bottom: size.top,\n        left: size.left,\n        width: size.width,\n        height: size.height,\n      }}\n    >\n      <section id=\"layers-layout\">\n        <section id=\"three-canvas\">\n          <Canvas shadows\n            raycaster={{ params: { Line: { threshold: 0.03 } } }}\n            gl={{ preserveDrawingBuffer: true }} \n            camera={{\n              position: new THREE.Vector3(0, 0, 4),\n              aspect: size.width/size.height\n            }}>\n            <group name=\"group-layers\">\n              {state.layers.map((props: LayerProps) => {\n                  return (\n                    <Layer  {...props} key={`layer-${props.id}`} />\n                  )\n                })}\n            </group>\n              \n                {state.orbitControls ? <OrbitControls makeDefault/> : null}\n                <TakeScreenshot />\n                <DownloadAsJSON/>\n                <ResetCamera />\n              </Canvas>\n          \n          </section> \n      </section>\n        \n      \n     \n        \n      </div>\n      )\n}\n\n","\nimport React, { useEffect } from 'react';\nimport '../styles/information.css'\nfunction Information(props: any) {\n    const onHover = (item: any, section: string) => {\n        item.addEventListener(\"mouseover\", (v: any) => {\n            const elements = document.getElementsByClassName(section);\n            Array.from(elements).forEach((e:any) => {\n                e.style.setProperty('background', 'var(--font-color)');\n                e.style.setProperty('color', 'var(--background)');\n            });\n            \n\n        }, false);\n        item.addEventListener(\"mouseout\", (v: any) => {\n            const elements = document.getElementsByClassName(section);\n            Array.from(elements).forEach((e:any) => {\n                e.style.setProperty('background', 'var(--background)');\n                e.style.setProperty('color',  'var(--font-color)');\n            });\n        }\n            , false);\n    }\n    useEffect(() => {\n        var elements = document.getElementsByClassName(\"section1\");\n        Array.from(elements).forEach((e) => onHover(e, \"section1\"));\n        \n        elements = document.getElementsByClassName(\"section2\");\n        Array.from(elements).forEach((e) => onHover(e, \"section2\"));\n        \n        elements = document.getElementsByClassName(\"section30\");\n        Array.from(elements).forEach((e) => onHover(e, \"section30\"));\n        elements = document.getElementsByClassName(\"section31\");\n        Array.from(elements).forEach((e) => onHover(e, \"section31\"));\n        elements = document.getElementsByClassName(\"section33\");\n        Array.from(elements).forEach((e) => onHover(e, \"section33\"));\n        elements = document.getElementsByClassName(\"section34\");\n        Array.from(elements).forEach((e)=> onHover(e,\"section34\"));\n\n    }, [])\n    \n\n    const { blockSize1, blockSize2 } = props;\n\n    return <>\n        <section id=\"information\"\n            className=\"block-info\"\n            style={{\n                bottom: blockSize1.top,\n                left: blockSize1.left,\n                width: blockSize1.width,\n                height: blockSize1.height,\n                overflowY: \"scroll\",\n                padding: \"0 0\"\n            }}>\n            <div className=\"sub-block section1 text\">\n                <h1>SECTION I : Gallery</h1>\n                <p>\n                Pick the source image by using the arrows\n                </p>\n                <p>You can zoom in/out and rotate the source image.</p>\n                \n            </div>\n            <div className=\"sub-block section2 text\">\n                <h1>SECTION II : Mask editor</h1>\n                <p>Enable controls by pressing on the <b>| mask |</b> button.</p>\n              \n                <p>\n                Generate a chromatic mask from the source image.\n                </p> \n                <h2>{\"HOW>\"}</h2>\n                    <p>Pick a color.</p>\n                    <p>All pixels whose color values are within the threshold number will be seen as red, which later will become the mask.</p>\n                    <p>The smoothness parameter will control the edges.</p>\n                   \n            </div>\n            <div className=\"sub-block section30 text no-border\">\n                <h1>SECTION III: Layers editor</h1>\n                <p>Enable controls by pressing on the <b>| layer |</b> button.</p>\n                \n                <p><b>{\"button |+|\"}</b> Add the layer, translate it and rotate it with the pivot controls.</p>\n                <p>Change the output color, and you con <b>mix</b> it with original source</p>\n                {/* <p><b>{\"button\"}</b><i className=\"icon\" src=\"icons/axis.jpeg\"/> Show and hide the pivot controls</p> */}\n            \n            \n            </div>\n            <div className=\"sub-block section31 text no-border\">\n                <p> Combine using <b>| mask |</b> + <b>| layer |</b> buttons to add multiple layers</p>\n            </div>\n            <div className=\"sub-block section33 text no-border\">\n                <p> Enable orbit controls with <b> | 3D |</b> button. </p>\n                <p> Toggle to screen mode with <b> | 2D |</b> button. </p>\n                <p> Reset camera position with <b> | R |</b> button. </p>\n            </div>\n            <div className=\"sub-block section34 text no-border\">\n            <p> Try your design in dark mode</p>\n            </div>\n\n\n        </section>\n        <section id=\"demo\"\n            className=\"block-info\"\n            style={{\n                bottom: blockSize2.top,\n                left: blockSize2.left,\n                width: blockSize2.width,\n                height: blockSize2.height,\n                overflowY: \"scroll\",\n                padding: \"0 0\"\n              }}\n        \n        >\n            <div className=\"sub-block section1\">\n                <video autoPlay controls={false} src=\"./section1.mp4\" />      \n            </div>\n            <div className=\"sub-block section2\">\n                <video autoPlay controls={false}  src=\"./section2.mp4\" ></video>            \n            </div>\n            <div className=\"sub-block section30 no-border\">\n                <video autoPlay controls={false} src=\"./section30.mp4\" ></video>\n            </div>\n            <div className=\"sub-block section31 no-border\">\n                <video autoPlay controls={false} src=\"./section31.mp4\" ></video>\n                <video  autoPlay controls={false} src=\"./section32.mp4\" ></video>\n            </div>\n            <div className=\"sub-block section33 no-border\">\n                <video autoPlay controls={false} src=\"./section33.mp4\" ></video>\n            </div>\n            <div className=\"sub-block section34\">\n                <video autoPlay controls={false} src=\"./section34.mp4\" ></video>\n            </div>\n        </section>\n           </>\n}\n\n\nexport default Information;","import React, { useEffect, useState } from 'react';\nimport { Controls } from './components/Controls'\nimport { Mask } from './components/Mask'\nimport { Layers } from './components/Layers'\nimport Information from  './components/Information'\nimport useSourceManager from './hooks/useSourceManager';\nimport useLayersManager from './hooks/useLayersManager';\n\nfunction App() {\n\n  const [width, setWidth] = useState(window.innerWidth);\n  const [height, setHeight] = useState(window.innerHeight);\n\n  const didLoad = useSourceManager((state: any) => state.loaded);\n  const path = useSourceManager((state: any) => state.selected.path);\n  const show = useLayersManager((state: any) => state.show);\n  \n  \n  useEffect(() => {\n    //console.log(didLoad)\n    //console.log(path)\n  }, [didLoad, path])\n\n  useEffect(() => {\n\n    const resize = () => {\n      setWidth(window.innerWidth);\n      setHeight(window.innerHeight);\n      \n    }\n    window.addEventListener(\"resize\", resize);\n    return () => window.removeEventListener(\"resize\", resize);\n  }, []);\n\n  \n  return (\n    < >\n      \n      <Controls size={{\n        left: 0,\n        top: 0,\n        width: width / 2 * (1 / 3.),\n        height: height,\n      }} className=\"block\"\n      />\n      {!show ?\n        <Information blockSize1={{\n          left: width / 2 * 1. / 3,\n          top: 0,\n          width: width / 2 * (2 / 3.),\n          height: height,\n        } }\n          blockSize2={{\n            left: width / 2,\n            top: 0,\n            width: width / 2,\n            height: height,\n          }\n\n          }\n        /> :\n        <>\n          <Mask size={{\n            left: width / 2 * 1. / 3,\n            top: 0,\n            width: width / 2 * (2 / 3.),\n            height: height,\n          }} className=\"block\" />\n        \n          <Layers size={{\n            left: width / 2,\n            top: 0,\n            width: width / 2,\n            height: height,\n          }} className=\"block\" />\n        </>}\n      </>\n  );\n}\n\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './styles/index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}